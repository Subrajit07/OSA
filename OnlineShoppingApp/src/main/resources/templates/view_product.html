<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title th:text="${category}"></title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link th:href="@{/css/home.css}" rel="stylesheet">
<style>
	body{
		background-color: rgb(241, 255, 253);
	}
</style>
</head>
<body>
<header>
     <div class="logo">
	  	<img src="/images/eco-shop-logo.jpg" style="height: 40px;"/>𝑬𝒸ₒ𝐵ₐ𝓏ₐₐ𝓇
	</div>
    <nav>
	   <a th:href="@{/products/home}">Home</a>
	    <a th:href="@{/products/{category}(category='FOODS')}"
	       th:classappend="${category.name()} == 'FOODS' ? 'active'">Foods</a>
	    <a th:href="@{/products/{category}(category='VEGETABLES')}"
	       th:classappend="${category.name()} == 'VEGETABLES' ? 'active'">Vegetables</a>
	    <a th:href="@{/products/{category}(category='ELECTRONICS')}"
	       th:classappend="${category.name()} == 'ELECTRONICS' ? 'active'">Electronics</a>
	    <a th:href="@{/products/{category}(category='CLOTHES')}"
	       th:classappend="${category.name()} == 'CLOTHES' ? 'active'">Clothes</a>
	    <a th:href="@{/products/{category}(category='SPORTS')}"
	       th:classappend="${category.name()} == 'SPORTS' ? 'active'">Sports</a>
	    <a th:href="@{/products/{category}(category='BOOKS')}"
	       th:classappend="${category.name()} == 'BOOKS' ? 'active'">Books</a>
	    <a th:href="@{/products/profile}"><i class="bi bi-person-circle"></i> Profile</a>
	</nav>
  </header>
  
	<div class="product-section">
	<a href="javascript:history.back()" class="back-button">
   		<i class="bi bi-arrow-left"></i>
	</a>
	<div class="edit-product-remove-button">
		<a th:href="@{/products/remove/{id}(id=${product.id})}" class="edit-remove-icon"><i class="bi bi-trash3"></i></a>
	</div>
	<div class="product-detail-container">
	    <!-- Left: Thumbnails -->
	    <div class="thumbnail-column">
	        <img th:each="img, iterStat : ${product.images}"
	             th:src="@{/products/image/{productId}/{imageIndex}(productId=${product.id}, imageIndex=${iterStat.index})}"
	             alt="Thumbnail"
	             class="thumbnail-image"
	             th:attr="onclick=|showImage('@{/products/image/{productId}/{imageIndex}(productId=${product.id}, imageIndex=${iterStat.index})}')|" />
	    </div>
	    
	    <!-- Center: Main Image -->
	    <div class="main-image-container">
	        <img id="mainProductImage"
	             th:src="@{/products/image/{productId}/{imageIndex}(productId=${product.id}, imageIndex=0)}"
	             alt="Main Product Image"
	             class="main-product-image" />
	    </div>
    
	    <!-- Right: Product Info -->
	    <div class="product-info">
	        <p th:text="${product.name}" class="product-name"></p>
	        <p th:text="${product.description}"></p>
	        <div class="product-price-line">
		        <p class="product-price">₹ <span th:text="${product.price}"></span></p>
		        <p class="product-discount">-<span th:text="${product.discount}"></span>% </p>
		    </div>
	        <p><strong>Brand:</strong> <span th:text="${product.brand}"></span></p>
	        <div th:if="${#strings.equalsIgnoreCase(product.stock, 'AVAILABLE')}" 
			     class="product-stock text-success fw-bold">
			    <p><span th:text="${product.stock}"></span></p>
			    <p class="delivery-info">
			        FREE Delivery — 
			        <span th:text="${#temporals.format(#temporals.createNow().plusDays(2), 'EEEE, dd MMMM')}"></span>
			    </p>
			</div>
			<div th:if="${!#strings.equalsIgnoreCase(product.stock, 'AVAILABLE')}" 
			     class="product-stock text-danger fw-bold">
			    <p>Oops! Product is not available</p>
			</div>
			
			<button class="add-to-cart-view"><i class="bi bi-cart-plus"> Add Cart</i></button>
			<br>
			<button class="buy-button-view">Buy Now</button>
	
	    </div>
	</div>
	</div>
<script>
    function showImage(imageUrl) {
        document.getElementById("mainProductImage").src = imageUrl;
    }
</script>
	
</body>
</html>